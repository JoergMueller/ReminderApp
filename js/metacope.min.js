function getRandomNumber(range){"use strict";return Math.floor(Math.random()*range)}function getRandomChar(){"use strict";var chars="0123456789abcdefghijklmnopqurstuvwxyzABCDEFGHIJKLMNOPQURSTUVWXYZ";return chars.substr(getRandomNumber(62),1)}function randomID(size){"use strict";var str="",i=0;for(i=0;size>i;i+=1)str+=getRandomChar();return str}function getID(c){"use strict";return randomID(c||70)}function strip_tags(a,b){return b=(((b||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join(""),a.replace(/\x3c!--[\s\S]*?--\x3e|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(a,c){return-1<b.indexOf("<"+c.toLowerCase()+">")?a:""})}var substringMatcher=function(b){return function(e,f){var a,c;a=[],c=new RegExp(e,"i"),$.each(b,function(b,d){c.test(d)&&a.push({value:d})}),f(a)}};!function(){var b={};this.tmpl=function e(a,c){var d=/\W/.test(a)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):b[a]=b[a]||e(document.getElementById(a).innerHTML);return c?d(c):d}}(),function(a){var e=a.fn.attr;a.fn.attr=function(){var b,a,c,d;if(this[0]&&0===arguments.length){for(d={},c=this[0].attributes,a=c.length,b=0;a>b;b++)d[c[b].name.toLowerCase()]=c[b].value;return d}return e.apply(this,arguments)}}(jQuery),function(e){e.fn.shuffle=function(a){for(var d,c,b=a.length;b>0;)c=Math.floor(Math.random()*b),b--,d=a[b],a[b]=a[c],a[c]=d;return a}}(jQuery,window);var showModal=function(a){a=$(a);var b=$(".modal.in");0<b.length?b.one("hidden",function(){a.modal("show"),a.one("hidden",function(){b.modal("show")})}).modal("hide"):a.modal("show")};$.urlDeParam=function(n,a){var c,b,d,e={};if(a=a||window.location.href,a=a.slice(a.indexOf("?")+1),""!==a)for(a=a.split("&"),c=0;c<a.length;c+=1)b=a[c].split("="),d=decodeURIComponent(b[0]),b=1<b.length?decodeURIComponent(b[1]):void 0,e[d]=b;return void 0!=n&&e[n]?e[n]:e},MC={},MC.EventManager=function(){function notify(event,data){data=data?[data]:[],defaults.debug&&console.log("app-notify: "+event,data);var n=0;if(event&&event in defaults.listeners)for(var id in defaults.listeners[event]){var l=defaults.listeners[event][id];try{defaults.debug&&console.log(l),setTimeout(function(l,data){l.func.apply(l.context,data)}(l,data),100),n++}catch(e){}}return n}function addListener(event,func,context,id){return context=context||window,id=id||"listener_"+getID(16),defaults.debug&&console.log("app-event-id: "+id),event&&context&&func?(defaults.listeners[event]||(defaults.listeners[event]={}),defaults.listeners[event][id]={context:context,func:func},defaults.debug&&(console.log("app-add: "+event,context,func,id),console.info(defaults.listeners)),id):!1}function remListener(event,id){return event in defaults.listeners?(delete defaults.listeners[event][id],!0):!1}function jsonresponse(r){defaults.debug&&console.log("app-notify: jsonresponse:",r);for(var a in r){var b=r[a];if(void 0!=b.type)switch(b.type){case"replace":$(a).replaceWith(b.content);break;case"update":$(a).empty().append(b.content);break;case"append":$(a).append(b.content);break;case"prepend":$(a).prepend(b.content)}}}function jsonload(options){options.selector=void 0!=options.selector?options.selector:'[data-toggle="jsonload"],.jsonload',$(options.selector).each(function(){defaults.debug&&console.log("app-notify: jsonload - this:",this),defaults.debug&&console.log("app-notify: jsonload - options:",options),void 0==this.jload&&(this.jload=options,$(this).attr("data-jsonload-selector",options.selector),$(this).on("click",function(e){e.preventDefault(),that=this;var href=that.href?that.href:$(that).data("href")?$(that).data("href"):!1;return void 0!=$(that).data("target")&&$($(that).data("target")).empty().append($spinner),$.get(href,$(that).data(),function(data){defaults.debug&&console.log("app-notify: jsonload-get-request:",data),void 0!=that.jload.callbackBefore&&that.jload.callbackBefore(that,data),void 0!=$(that).data("target")&&"String"==typeof data?$($(that).data("target")).empty().append(data):$.fn.eventManager.notify("mc.jsonresponse",data),void 0!=that.jload.callbackAfter&&that.jload.callbackAfter(that,data)},"json"),!1}))})}function selection(o){var selector=void 0!=o.selector?o.selector:document;$(selector).disableSelection(o.attribute)}var defaults={debug:!1,listeners:[]};return{notify:notify,addListener:addListener,remListener:remListener,jsonload:jsonload,selection:selection,jsonresponse:jsonresponse}}(window),function($,MC){$.fn.eventManager=MC.EventManager,$.fn.eventManager.listener=function(){MC.EventManager.addListener("mc.jsonresponse",MC.EventManager.jsonresponse),MC.EventManager.addListener("mc.jsonload",MC.EventManager.jsonload),MC.EventManager.addListener("mc.selection",MC.EventManager.selection),MC.EventManager.addListener("mc.autocomplete",function(o){var selector=void 0!=o.selector?o.selector:"body input.typeahead";$(selector).each(function(){var that=this;this.id=this.id?this.id:getID(9),$.fn.typeahead.opt={id:that.id,target:$(that).closest('[data-toggle="autocomplete"]').data("target")};var engine=new Bloodhound({name:"users",remote:{wildcard:"%QUERY",url:$.fn.typeahead.opt.target+"?q=%QUERY",filter:function(engine){return $.map(engine,function(user){return{value:user.token,nickname:user.nickname+", "+user.fullname,token:user.token,data:user}})}},datumTokenizer:function(d){return Bloodhound.tokenizers.whitespace(d.val)},queryTokenizer:Bloodhound.tokenizers.whitespace});engine.initialize(),$(this).typeahead({minLength:1,highlight:!0},{name:"users",displayKey:"nickname",source:engine.ttAdapter(),updater:function(item){return alert(item),item},templates:{empty:['<div class="empty-message">',"keine Ergebnisse gefunden","</div>"].join("\n"),suggestion:function(data){return"<p><strong>"+data.nickname+"</strong> â€“ "+data.token+"</p>"}}}),$(this).on("typeahead:selected",function(a,b){var href=a.target.dataset.postdispatch+"/employee/"+b.data.token+"/client/"+a.target.dataset.client;$.get(href,{},function(data){$.fn.eventManager.notify("mc.jsonresponse",data)},"json")})})}),MC.EventManager.addListener("mc.searchfield",function(obj){switch(obj.type){case"image":$(obj.target).wrap($("<form />",{style:"width:318px;","class":"jqform",method:"post",action:"/page/ajax/"+obj.type+"/id"}));break;case"document":$(obj.target).wrap($("<form />",{"class":"jqform",method:"post",action:"/page/ajax/"+obj.type+"/id"}))}}),MC.EventManager.addListener("mc.scroll",function(o){o=o||{},void 0==o.selector&&(o.selector="body"),$pselements=!1,$pselements=$(o.selector).perfectScrollbar({wheelSpeed:5,suppressScrollX:!0,wheelPropagation:!1,swipePropagation:!1,includePadding:!0}),$(o.selector).on("change",function(){$(this).perfectScrollbar("update")}),$(o.selector).on("load",function(){$(this).perfectScrollbar("update")}),$pselements.data("perfect-scrollbar-update")()}),MC.EventManager.addListener("mc.jqform",function(o){o=o||{},void 0!=o.selector&&$(o.selector).each(function(){$(this).unbind(),$(this).on("submit",function(){return $(this).find(".formError").length>0?!1:($(this).ajaxSubmit({dataType:"json",success:function(data){void 0!=o.callback?o.callback(data):MC.EventManager.notify("mc.jsonresponse",data)}}),!1)})})}),MC.EventManager.addListener("mc.postDispatch",function(o){(void 0==o.out||void 0==o.out.scrollbar||0==o.out.scrollbar)&&MC.EventManager.notify("mc.scroll",{}),(void 0==o.out||void 0==o.out.wysihtml5||0==o.out.wysihtml5)&&($("iframe.wysihtml5-sandbox, input[name='_wysihtml5_mode']").remove(),$("body").removeClass("wysihtml5-supported"),$(".wysihtml5, .whtml").wysihtml5({"font-styles":!1,html:!0})),void 0!=o.out&&void 0!=o.out.tooltip&&0!=o.out.tooltip&&$(o.out.tooltip.selector).tooltip(o.out.tooltip.options),(void 0==o.out||void 0==o.out.popover||0==o.out.popover)&&$('[data-toggle="popover"]').popover({html:!0}),(void 0==o.out||void 0==o.out.jsonload||0==o.out.jsonload)&&MC.EventManager.notify("mc.jsonload"),$("a:not(:has(img))").each(function(){this.hostname&&this.hostname!==location.hostname&&($(this).attr({target:"_blank"}),$(this).addClass("external-link"))}),$("span.mail").each(function(){"A"==$(this).parent()[0].nodeName||$(this).html().indexOf("[at]")<=0||$(this).replaceWith('<a href="mailto:'+this.innerHTML.replace(/\[at\]/,"@")+'"><span class="'+$(this).attr("class")+'">'+this.innerHTML.replace(/\[at\]/,"@")+"</span></a>")}),window.setTimeout(function(){new Blazy({selector:"img.lazy",src:"data-original"})},200)})}}(jQuery,MC),$.fn.eventManager.listener();